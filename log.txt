========================================================================================= test session starts ==========================================================================================
platform darwin -- Python 3.12.6, pytest-8.2.2, pluggy-1.5.0
rootdir: /Users/michael/Documents/projects/blockhash-oracle
configfile: pyproject.toml
plugins: titanoboa-0.2.5, cov-6.0.0, hypothesis-6.123.4, anyio-4.8.0, xdist-3.6.1
collected 1 item

tests/unitary/BlockHeadersRLPDecoder/test_decode_many_blocks.py Blocks cache loaded from file
64
.                                                                                                                                             
                                                                                                                                             
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━┳━━━━━━━━┳━━━━━━━┳━━━━━━━━┳━━━━━━━━┓
┃ Contract                                             ┃ Computation                    ┃ Count ┃ Mean   ┃ Median ┃ Stdev ┃ Min    ┃ Max    ┃
┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━╇━━━━━━━━╇━━━━━━━╇━━━━━━━━╇━━━━━━━━┩
│ Path: contracts                                      │                                │       │        │        │       │        │        │
│ Name: BlockHeadersRLPDecoder.vy                      │                                │       │        │        │       │        │        │
│ Address: 0xC6Acb7D16D51f72eAA659668F30A40d87E2E0551  │                                │       │        │        │       │        │        │
│                                                      │ decode_many_blocks             │ 1     │ 150937 │ 150937 │ 0     │ 150937 │ 150937 │
└──────────────────────────────────────────────────────┴────────────────────────────────┴───────┴────────┴────────┴───────┴────────┴────────┘
                                                                                                                                                                                           
                                                                                                                                                                                           
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━┳━━━━━━━━┳━━━━━━━┳━━━━━━━┳━━━━━━━┓
┃ Contract                                             ┃ Computation                                                                     ┃ Count ┃ Mean  ┃ Median ┃ Stdev ┃ Min   ┃ Max   ┃
┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━╇━━━━━━━━╇━━━━━━━╇━━━━━━━╇━━━━━━━┩
│ Path: contracts                                      │                                                                                 │       │       │        │       │       │       │
│ Name: BlockHeadersRLPDecoder.vy                      │                                                                                 │       │       │        │       │       │       │
│ Address: 0xC6Acb7D16D51f72eAA659668F30A40d87E2E0551  │                                                                                 │ Count │ Mean  │ Median │ Stdev │ Min   │ Max   │
│ ---------------------------------------------------- │ --------------------------------------------------------------------------      │ ----- │ ----- │ -----  │ ----- │ ----- │ ----- │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 167: block_hash=keccak256(encoded_header),                                      │ 1     │ 9792  │ 9792   │ 0     │ 9792  │ 9792  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 142: prefix: uint256 = convert(slice(encoded_header, current_pos, 1), uint256)  │ 1     │ 6272  │ 6272   │ 0     │ 6272  │ 6272  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 141: for i: uint256 in range(2):  # handle both fields same way                 │ 1     │ 5376  │ 5376   │ 0     │ 5376  │ 5376  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 112: abi_decode(abi_encode(slice(encoded_header, current_pos + 1, len_of_len))… │ 1     │ 4480  │ 4480   │ 0     │ 4480  │ 4480  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 134: abi_decode(abi_encode(slice(encoded_header, current_pos + 1, number_len))… │ 1     │ 4480  │ 4480   │ 0     │ 4480  │ 4480  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 143: if prefix < RLP_SHORT_START:                                               │ 1     │ 4224  │ 4224   │ 0     │ 4224  │ 4224  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  77: assert convert(slice(encoded_header, current_pos, 1), uint256) == 160  # … │ 1     │ 3968  │ 3968   │ 0     │ 3968  │ 3968  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  82: assert convert(slice(encoded_header, current_pos, 1), uint256) == 160      │ 1     │ 3968  │ 3968   │ 0     │ 3968  │ 3968  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  86: assert convert(slice(encoded_header, current_pos, 1), uint256) == 148  # … │ 1     │ 3968  │ 3968   │ 0     │ 3968  │ 3968  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  90: assert convert(slice(encoded_header, current_pos, 1), uint256) == 160      │ 1     │ 3968  │ 3968   │ 0     │ 3968  │ 3968  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  96: assert convert(slice(encoded_header, current_pos, 1), uint256) == 160      │ 1     │ 3968  │ 3968   │ 0     │ 3968  │ 3968  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  98: assert convert(slice(encoded_header, current_pos, 1), uint256) == 160      │ 1     │ 3968  │ 3968   │ 0     │ 3968  │ 3968  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  65: first_byte: uint256 = convert(slice(encoded_header, 0, 1), uint256)        │ 1     │ 3264  │ 3264   │ 0     │ 3264  │ 3264  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 103: logs_bloom_prefix: uint256 = convert(slice(encoded_header, current_pos, 1… │ 1     │ 3136  │ 3136   │ 0     │ 3136  │ 3136  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 118: difficulty_prefix: uint256 = convert(slice(encoded_header, current_pos, 1… │ 1     │ 3136  │ 3136   │ 0     │ 3136  │ 3136  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 126: number_prefix: uint256 = convert(slice(encoded_header, current_pos, 1), u… │ 1     │ 3136  │ 3136   │ 0     │ 3136  │ 3136  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 150: timestamp_prefix: uint256 = convert(slice(encoded_header, current_pos, 1)… │ 1     │ 3136  │ 3136   │ 0     │ 3136  │ 3136  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 147: current_pos += 1 + length                                                  │ 1     │ 2944  │ 2944   │ 0     │ 2944  │ 2944  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 159: abi_encode(slice(encoded_header, current_pos + 1, timestamp_len)),         │ 1     │ 2880  │ 2880   │ 0     │ 2880  │ 2880  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  69: if first_byte < RLP_LIST_LONG_START:  # short list                         │ 1     │ 2368  │ 2368   │ 0     │ 2368  │ 2368  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 119: if difficulty_prefix < RLP_SHORT_START:                                    │ 1     │ 2368  │ 2368   │ 0     │ 2368  │ 2368  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 128: if number_prefix < RLP_SHORT_START:                                        │ 1     │ 2368  │ 2368   │ 0     │ 2368  │ 2368  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 152: if timestamp_prefix < RLP_SHORT_START:                                     │ 1     │ 2368  │ 2368   │ 0     │ 2368  │ 2368  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 106: elif logs_bloom_prefix < RLP_LONG_START:  # short string                   │ 1     │ 2112  │ 2112   │ 0     │ 2112  │ 2112  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  78: parent_hash: bytes32 = extract32(encoded_header, current_pos + 1, output_… │ 1     │ 1984  │ 1984   │ 0     │ 1984  │ 1984  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  91: state_root: bytes32 = extract32(encoded_header, current_pos + 1)           │ 1     │ 1984  │ 1984   │ 0     │ 1984  │ 1984  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 115: current_pos += 1 + len_of_len + data_length                                │ 1     │ 1984  │ 1984   │ 0     │ 1984  │ 1984  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 104: if logs_bloom_prefix < RLP_SHORT_START:  # single byte                     │ 1     │ 1856  │ 1856   │ 0     │ 1856  │ 1856  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 146: length: uint256 = prefix - RLP_SHORT_START                                 │ 1     │ 1792  │ 1792   │ 0     │ 1792  │ 1792  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 158: abi_decode(                                                                │ 1     │ 1600  │ 1600   │ 0     │ 1600  │ 1600  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  66: assert first_byte >= RLP_LIST_SHORT_START, "Not a list"                    │ 1     │ 1472  │ 1472   │ 0     │ 1472  │ 1472  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 123: current_pos += 1 + diff_len                                                │ 1     │ 1472  │ 1472   │ 0     │ 1472  │ 1472  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 137: current_pos += 1 + number_len                                              │ 1     │ 1472  │ 1472   │ 0     │ 1472  │ 1472  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 164: current_pos += 1 + timestamp_len                                           │ 1     │ 1472  │ 1472   │ 0     │ 1472  │ 1472  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 111: data_length: uint256 = convert(                                            │ 1     │ 1280  │ 1280   │ 0     │ 1280  │ 1280  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  73: current_pos = 1 + len_of_len                                               │ 1     │ 1088  │ 1088   │ 0     │ 1088  │ 1088  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 133: block_number = convert(                                                    │ 1     │ 1088  │ 1088   │ 0     │ 1088  │ 1088  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 157: timestamp = convert(                                                       │ 1     │ 1088  │ 1088   │ 0     │ 1088  │ 1088  │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  72: len_of_len: uint256 = first_byte - RLP_LIST_LONG_START                     │ 1     │ 896   │ 896    │ 0     │ 896   │ 896   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 110: len_of_len: uint256 = logs_bloom_prefix - RLP_LONG_START                   │ 1     │ 896   │ 896    │ 0     │ 896   │ 896   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 122: diff_len: uint256 = difficulty_prefix - RLP_SHORT_START                    │ 1     │ 896   │ 896    │ 0     │ 896   │ 896   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 132: number_len: uint256 = number_prefix - RLP_SHORT_START                      │ 1     │ 896   │ 896    │ 0     │ 896   │ 896   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 156: timestamp_len: uint256 = timestamp_prefix - RLP_SHORT_START                │ 1     │ 896   │ 896    │ 0     │ 896   │ 896   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  79: current_pos += 33  # prefix + data                                         │ 1     │ 768   │ 768    │ 0     │ 768   │ 768   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  83: current_pos += 33                                                          │ 1     │ 768   │ 768    │ 0     │ 768   │ 768   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  87: current_pos += 21                                                          │ 1     │ 768   │ 768    │ 0     │ 768   │ 768   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  92: current_pos += 33                                                          │ 1     │ 768   │ 768    │ 0     │ 768   │ 768   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  97: current_pos += 33                                                          │ 1     │ 768   │ 768    │ 0     │ 768   │ 768   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  99: current_pos += 33                                                          │ 1     │ 768   │ 768    │ 0     │ 768   │ 768   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │  68: current_pos: uint256 = 0                                                   │ 1     │ 320   │ 320    │ 0     │ 320   │ 320   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 127: block_number: uint256 = 0                                                  │ 1     │ 320   │ 320    │ 0     │ 320   │ 320   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 151: timestamp: uint256 = 0                                                     │ 1     │ 320   │ 320    │ 0     │ 320   │ 320   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 168: parent_hash=parent_hash,                                                   │ 1     │ 192   │ 192    │ 0     │ 192   │ 192   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 169: state_root=state_root,                                                     │ 1     │ 192   │ 192    │ 0     │ 192   │ 192   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 170: number=block_number,                                                       │ 1     │ 192   │ 192    │ 0     │ 192   │ 192   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 171: timestamp=timestamp                                                        │ 1     │ 192   │ 192    │ 0     │ 192   │ 192   │
│ contracts/BlockHeadersRLPDecoder.vy:_decode_block_h… │ 166: return BlockHeader(                                                        │ 1     │ 128   │ 128    │ 0     │ 128   │ 128   │
│ ---------------------------------------------------- │ --------------------------------------------------------------------------      │ ----- │ ----- │ -----  │ ----- │ ----- │ ----- │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 212: abi_decode(abi_encode(slice(encoded_headers, current_pos + 1, block_len_o… │ 1     │ 4480  │ 4480   │ 0     │ 4480  │ 4480  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 208: block_prefix: uint256 = convert(slice(encoded_headers, current_pos, 1), u… │ 1     │ 3136  │ 3136   │ 0     │ 3136  │ 3136  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 182: first_byte: uint256 = convert(slice(encoded_headers, 0, 1), uint256)       │ 1     │ 2884  │ 2884   │ 0     │ 2884  │ 2884  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 219: abi_encode(slice(encoded_headers, block_start, block_length)),             │ 1     │ 2560  │ 2560   │ 0     │ 2560  │ 2560  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 218: block_data: Bytes[768] = abi_decode(                                       │ 1     │ 2240  │ 2240   │ 0     │ 2240  │ 2240  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 202: for i: uint256 in range(128):                                              │ 1     │ 2065  │ 2065   │ 0     │ 2065  │ 2065  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 223: tmp = self._decode_block_headers(block_data)                               │ 1     │ 1856  │ 1856   │ 0     │ 1856  │ 1856  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 209: assert block_prefix > RLP_LONG_START  # should be 0xb9                     │ 1     │ 1408  │ 1408   │ 0     │ 1408  │ 1408  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 217: block_start: uint256 = current_pos + 1 + block_len_of_len                  │ 1     │ 1408  │ 1408   │ 0     │ 1408  │ 1408  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 211: block_length: uint256 = convert(                                           │ 1     │ 1280  │ 1280   │ 0     │ 1280  │ 1280  │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 210: block_len_of_len: uint256 = block_prefix - RLP_LONG_START                  │ 1     │ 896   │ 896    │ 0     │ 896   │ 896   │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 224: current_pos = block_start + block_length                                   │ 1     │ 896   │ 896    │ 0     │ 896   │ 896   │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 225: blocks_processed += 1                                                      │ 1     │ 768   │ 768    │ 0     │ 768   │ 768   │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 204: if current_pos >= end_pos:                                                 │ 1     │ 390   │ 390    │ 0     │ 390   │ 390   │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 205: break                                                                      │ 1     │ 195   │ 195    │ 0     │ 195   │ 195   │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 194: abi_decode(abi_encode(slice(encoded_headers, 1, len_of_len)), (Bytes[32])… │ 1     │ 60    │ 60     │ 0     │ 60    │ 60    │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 188: if first_byte < RLP_LIST_LONG_START:                                       │ 1     │ 37    │ 37     │ 0     │ 37    │ 37    │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 181: def decode_many_blocks(encoded_headers: Bytes[49152]) -> uint256:          │ 1     │ 35    │ 35     │ 0     │ 35    │ 35    │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 183: assert first_byte >= RLP_LIST_SHORT_START, "Not a list"                    │ 1     │ 23    │ 23     │ 0     │ 23    │ 23    │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 192: len_of_len: uint256 = first_byte - RLP_LIST_LONG_START                     │ 1     │ 23    │ 23     │ 0     │ 23    │ 23    │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 185: current_pos: uint256 = 0                                                   │ 1     │ 17    │ 17     │ 0     │ 17    │ 17    │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 193: total_length = convert(                                                    │ 1     │ 17    │ 17     │ 0     │ 17    │ 17    │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 197: current_pos = 1 + len_of_len                                               │ 1     │ 17    │ 17     │ 0     │ 17    │ 17    │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 200: end_pos: uint256 = current_pos + total_length                              │ 1     │ 14    │ 14     │ 0     │ 14    │ 14    │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 199: blocks_processed: uint256 = 0                                              │ 1     │ 5     │ 5      │ 0     │ 5     │ 5     │
│ contracts/BlockHeadersRLPDecoder.vy:decode_many_blo… │ 227: return blocks_processed                                                    │ 1     │ 3     │ 3      │ 0     │ 3     │ 3     │
└──────────────────────────────────────────────────────┴─────────────────────────────────────────────────────────────────────────────────┴───────┴───────┴────────┴───────┴───────┴───────┘


========================================================================================== 1 passed in 0.79s ===========================================================================================
